<!doctype html><html lang=cn><head><meta name=generator content="Hugo 0.80.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="1.1 调试源代码 #    各位读者朋友，很高兴大家通过本博客学习 Go 语言，感谢一路相伴！《Go语言设计与实现》的纸质版图书已经上架京东，有需要的朋友请点击 链接 购买。  Go 语言作为开源项目，我们可以很轻松地获取它的源代码，它有着非常复杂的项目结构和庞大的代码库，今天的 Go 语言中差不多有 150 万行源代码，其中包含将近 140 万行的 Go 语言代码，我们可以使用如下所示的命令查看项目中代码的行数：
$ cloc src 5988 text files. 5875 unique files. 1165 files ignored. github.com/AlDanial/cloc v 1.78 T=6.96 s (693.7 files/s, 274805.2 lines/s) ----------------------------------------------------------------------------------- Language files blank comment code ----------------------------------------------------------------------------------- Go 4199 139910 221375 1398357 Assembly 486 12784 19137 106699 C 64 718 562 4587 JSON 12 0 0 1712 ."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="如何调试 Go 语言源代码"><meta property="og:description" content="1.1 调试源代码 #    各位读者朋友，很高兴大家通过本博客学习 Go 语言，感谢一路相伴！《Go语言设计与实现》的纸质版图书已经上架京东，有需要的朋友请点击 链接 购买。  Go 语言作为开源项目，我们可以很轻松地获取它的源代码，它有着非常复杂的项目结构和庞大的代码库，今天的 Go 语言中差不多有 150 万行源代码，其中包含将近 140 万行的 Go 语言代码，我们可以使用如下所示的命令查看项目中代码的行数：
$ cloc src 5988 text files. 5875 unique files. 1165 files ignored. github.com/AlDanial/cloc v 1.78 T=6.96 s (693.7 files/s, 274805.2 lines/s) ----------------------------------------------------------------------------------- Language files blank comment code ----------------------------------------------------------------------------------- Go 4199 139910 221375 1398357 Assembly 486 12784 19137 106699 C 64 718 562 4587 JSON 12 0 0 1712 ."><meta property="og:type" content="article"><meta property="og:url" content="/golang/docs/part1-prerequisite/ch01-prepare/golang-debug/"><title>如何调试 Go 语言源代码 | Go 语言设计与实现</title><link rel=manifest href=/golang/manifest.json><link rel=icon href=/golang/favicon.png type=image/x-icon><link rel=stylesheet href=/golang/book.min.bf064a71a8e587ec4bfe3f4ec7da33e2110269e1cd15b03e0a984aa16eeec2ab.css integrity="sha256-vwZKcajlh+xL/j9Ox9oz4hECaeHNFbA+CphKoW7uwqs="><script defer src=/golang/cn.search.min.34d3810a1ddfff99eab3ef038758ed373d5fd740414a9cc58628e2785e18d378.js integrity="sha256-NNOBCh3f/5nqs+8Dh1jtNz1f10BBSpzFhijieF4Y03g="></script><script type=text/javascript>!function(e,t,n,g,i){e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},n=t.createElement("script"),tag=t.getElementsByTagName("script")[0],n.async=1,n.src=('https:'==document.location.protocol?'https://':'http://')+g,tag.parentNode.insertBefore(n,tag)}(window,document,"script","assets.giocdn.com/2.1/gio.js","gio");gio('init','a78e562f3dfff84c',{});gio('send');</script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/golang><span>Go 语言设计与实现</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/golang-book-release>购买纸质书</a></li><li><a href=>面向信仰编程</a></li><li><a href=https://github.com/draveness>GitHub</a></li><li><a href=https://img.draveness.me/2020-03-11-15839264230785-wechat-qr-code.png>微信公众号</a></li><li><a href=https://twitter.com/draven0xff>Twitter</a></li><li><a href=https://weibo.com/u/5123574960>Weibo</a></li></ul><hr><ul><li>第一部分 预备知识<ul><li>第一章 准备工作<ul><li><a href=/golang/docs/part1-prerequisite/ch01-prepare/golang-debug/>1.1 调试源代码</a></li></ul></li><li>第二章 编译原理<ul><li><a href=/golang/docs/part1-prerequisite/ch02-compile/golang-compile-intro/>2.1 编译过程</a></li><li><a href=/golang/docs/part1-prerequisite/ch02-compile/golang-lexer-and-parser/>2.2 词法分析和语法分析</a></li><li><a href=/golang/docs/part1-prerequisite/ch02-compile/golang-typecheck/>2.3 类型检查</a></li><li><a href=/golang/docs/part1-prerequisite/ch02-compile/golang-ir-ssa/>2.4 中间代码生成</a></li><li><a href=/golang/docs/part1-prerequisite/ch02-compile/golang-machinecode/>2.5 机器码生成</a></li></ul></li></ul></li></ul><ul><li>第二部分 基础知识<ul><li>第三章 数据结构<ul><li><a href=/golang/docs/part2-foundation/ch03-datastructure/golang-array/>3.1 数组</a></li><li><a href=/golang/docs/part2-foundation/ch03-datastructure/golang-array-and-slice/>3.2 切片</a></li><li><a href=/golang/docs/part2-foundation/ch03-datastructure/golang-hashmap/>3.3 哈希表</a></li><li><a href=/golang/docs/part2-foundation/ch03-datastructure/golang-string/>3.4 字符串</a></li></ul></li><li>第四章 语言基础<ul><li><a href=/golang/docs/part2-foundation/ch04-basic/golang-function-call/>4.1 函数调用</a></li><li><a href=/golang/docs/part2-foundation/ch04-basic/golang-interface/>4.2 接口</a></li><li><a href=/golang/docs/part2-foundation/ch04-basic/golang-reflect/>4.3 反射</a></li></ul></li><li>第五章 常用关键字<ul><li><a href=/golang/docs/part2-foundation/ch05-keyword/golang-for-range/>5.1 for 和 range</a></li><li><a href=/golang/docs/part2-foundation/ch05-keyword/golang-select/>5.2 select</a></li><li><a href=/golang/docs/part2-foundation/ch05-keyword/golang-defer/>5.3 defer</a></li><li><a href=/golang/docs/part2-foundation/ch05-keyword/golang-panic-recover/>5.4 panic 和 recover</a></li><li><a href=/golang/docs/part2-foundation/ch05-keyword/golang-make-and-new/>5.5 make 和 new</a></li></ul></li></ul></li><li>第三部分 运行时<ul><li>第六章 并发编程<ul><li><a href=/golang/docs/part3-runtime/ch06-concurrency/golang-context/>6.1 上下文 Context</a></li><li><a href=/golang/docs/part3-runtime/ch06-concurrency/golang-sync-primitives/>6.2 同步原语与锁</a></li><li><a href=/golang/docs/part3-runtime/ch06-concurrency/golang-timer/>6.3 定时器</a></li><li><a href=/golang/docs/part3-runtime/ch06-concurrency/golang-channel/>6.4 Channel</a></li><li><a href=/golang/docs/part3-runtime/ch06-concurrency/golang-goroutine/>6.5 调度器</a></li><li><a href=/golang/docs/part3-runtime/ch06-concurrency/golang-netpoller/>6.6 网络轮询器</a></li><li><a href=/golang/docs/part3-runtime/ch06-concurrency/golang-sysmon/>6.7 系统监控</a></li></ul></li><li>第七章 内存管理<ul><li><a href=/golang/docs/part3-runtime/ch07-memory/golang-memory-allocator/>7.1 内存分配器</a></li><li><a href=/golang/docs/part3-runtime/ch07-memory/golang-garbage-collector/>7.2 垃圾收集器</a></li><li><a href=/golang/docs/part3-runtime/ch07-memory/golang-stack-management/>7.3 栈内存管理</a></li></ul></li></ul></li><li>第四部分 进阶内容<ul><li>第八章 元编程<ul><li><a href=/golang/docs/part4-advanced/ch08-metaprogramming/golang-plugin/>8.1 插件系统</a></li><li><a href=/golang/docs/part4-advanced/ch08-metaprogramming/golang-code-gen/>8.2 代码生成</a></li></ul></li><li>第九章 标准库<ul><li><a href=/golang/docs/part4-advanced/ch09-stdlib/golang-json/>9.1 JSON</a></li><li><a href=/golang/docs/part4-advanced/ch09-stdlib/golang-net-http/>9.2 HTTP</a></li><li><a href=/golang/docs/part4-advanced/ch09-stdlib/golang-database-sql/>9.3 数据库</a></li></ul></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/golang/svg/menu.svg class=book-icon alt=Menu></label>
<strong>如何调试 Go 语言源代码</strong>
<label for=toc-control><img src=/golang/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#11-调试源代码>1.1 调试源代码</a><ul><li><a href=#111-编译源码>1.1.1 编译源码</a></li><li><a href=#112-中间代码>1.1.2 中间代码</a></li><li><a href=#113-小结>1.1.3 小结</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=11-调试源代码>1.1 调试源代码
<a class=anchor href=#11-%e8%b0%83%e8%af%95%e6%ba%90%e4%bb%a3%e7%a0%81>#</a></h1><blockquote><p>各位读者朋友，很高兴大家通过本博客学习 Go 语言，感谢一路相伴！《Go语言设计与实现》的纸质版图书已经上架京东，有需要的朋友请点击 <a href="https://union-click.jd.com/jdc?e=&p=JF8BAL8JK1olXDYCVlpeCEsQAl9MRANLAjZbERscSkAJHTdNTwcKBlMdBgABFksVB2wIG1wUQl9HCANtSABQA2hTHjBwD15qUVsVU01rX2oKXVcZbQcyV19eC0sTAWwPHGslXQEyAjBdCUoWAm4NH1wSbQcyVFlfDkkfBWsKGFkXWDYFVFdtfQhHRDtXTxlXbTYyV25tOEsnAF9KdV4QXw4HUAlVAU5DAmoMSQhGDgMBAVpcWEMSU2sLTlpBbQQDVVpUOA">链接 </a>购买。</p></blockquote><p>Go 语言作为开源项目，我们可以很轻松地获取它的源代码，它有着非常复杂的项目结构和庞大的代码库，今天的 Go 语言中差不多有 150 万行源代码，其中包含将近 140 万行的 Go 语言代码，我们可以使用如下所示的命令查看项目中代码的行数：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ cloc src
    <span style=color:#ae81ff>5988</span> text files.
    <span style=color:#ae81ff>5875</span> unique files.
    <span style=color:#ae81ff>1165</span> files ignored.

github.com/AlDanial/cloc v 1.78  T<span style=color:#f92672>=</span>6.96 s <span style=color:#f92672>(</span>693.7 files/s, 274805.2 lines/s<span style=color:#f92672>)</span>
-----------------------------------------------------------------------------------
Language                         files          blank        comment           code
-----------------------------------------------------------------------------------
Go                                <span style=color:#ae81ff>4199</span>         <span style=color:#ae81ff>139910</span>         <span style=color:#ae81ff>221375</span>        <span style=color:#ae81ff>1398357</span>
Assembly                           <span style=color:#ae81ff>486</span>          <span style=color:#ae81ff>12784</span>          <span style=color:#ae81ff>19137</span>         <span style=color:#ae81ff>106699</span>
C                                   <span style=color:#ae81ff>64</span>            <span style=color:#ae81ff>718</span>            <span style=color:#ae81ff>562</span>           <span style=color:#ae81ff>4587</span>
JSON                                <span style=color:#ae81ff>12</span>              <span style=color:#ae81ff>0</span>              <span style=color:#ae81ff>0</span>           <span style=color:#ae81ff>1712</span>
...
-----------------------------------------------------------------------------------
SUM:                              <span style=color:#ae81ff>4828</span>         <span style=color:#ae81ff>154344</span>         <span style=color:#ae81ff>242395</span>        <span style=color:#ae81ff>1515787</span>
-----------------------------------------------------------------------------------
</code></pre></div><p>随着 Go 语言的不断演进，整个代码库也会随着时间不断变化，所以上面的统计结果每天都有所不同。虽然该项目有着巨大的代码库，但是想要调试 Go 语言并不是不可能的，只要我们掌握合适的方法并且对 Go 语言的标准库有一些了解，就可以调试 Go 语言，我们在这里会介绍一些编译和调试 Go 语言的方法。</p><h2 id=111-编译源码>1.1.1 编译源码
<a class=anchor href=#111-%e7%bc%96%e8%af%91%e6%ba%90%e7%a0%81>#</a></h2><p>假设我们想要修改 Go 语言中常用方法 <a href=/golang/tree/fmt.Println><code>fmt.Println</code></a> 的实现，实现如下所示的功能：在打印字符串之前先打印任意其它字符串。我们可以将该方法的实现修改成如下所示的代码片段，其中 <code>println</code> 是 Go 语言运行时提供的内置方法，它不需要依赖任何包就可以向标准输出打印字符串：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>a</span> <span style=color:#f92672>...</span><span style=color:#66d9ef>interface</span>{}) (<span style=color:#a6e22e>n</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>) {
	println(<span style=color:#e6db74>&#34;draven&#34;</span>)
	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>Fprintln</span>(<span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Stdout</span>, <span style=color:#a6e22e>a</span><span style=color:#f92672>...</span>)
}
</code></pre></div><p>当我们修改了 Go 语言的源代码项目，可以使用仓库中提供的脚本来编译生成 Go 语言的二进制以及相关的工具链：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ ./src/make.bash
Building Go cmd/dist using /usr/local/Cellar/go/1.14.2_1/libexec. <span style=color:#f92672>(</span>go1.14.2 darwin/amd64<span style=color:#f92672>)</span>
Building Go toolchain1 using /usr/local/Cellar/go/1.14.2_1/libexec.
Building Go bootstrap cmd/go <span style=color:#f92672>(</span>go_bootstrap<span style=color:#f92672>)</span> using Go toolchain1.
Building Go toolchain2 using go_bootstrap and Go toolchain1.
Building Go toolchain3 using go_bootstrap and Go toolchain2.
Building packages and commands <span style=color:#66d9ef>for</span> darwin/amd64.
---
Installed Go <span style=color:#66d9ef>for</span> darwin/amd64 in /Users/draveness/go/src/github.com/golang/go
Installed commands in /Users/draveness/go/src/github.com/golang/go/bin
</code></pre></div><p><code>./src/make.bash</code> 脚本会编译 Go 语言的二进制、工具链以及标准库和命令并将源代码和编译好的二进制文件移动到对应的位置上。如上述代码所示，编译好的二进制会存储在 <code>$GOPATH/src/github.com/golang/go/bin</code> 目录中，这里需要使用绝对路径来访问并使用它：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ cat main.go
package main

import <span style=color:#e6db74>&#34;fmt&#34;</span>

func main<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
	fmt.Println<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Hello World&#34;</span><span style=color:#f92672>)</span>
<span style=color:#f92672>}</span>
$ $GOPATH/src/github.com/golang/go/bin/go run main.go
draven
Hello World
</code></pre></div><p>我们会发现上述命令成功地调用了我们修改后的 <a href=/golang/tree/fmt.Println><code>fmt.Println</code></a> 函数，而在这时如果直接使用 <code>go run main.go</code>，很可能会使用包管理器安装的 <code>go</code> 二进制，得不到期望的结果。</p><h2 id=112-中间代码>1.1.2 中间代码
<a class=anchor href=#112-%e4%b8%ad%e9%97%b4%e4%bb%a3%e7%a0%81>#</a></h2><p>Go 语言的应用程序在运行之前需要先编译成二进制，在编译的过程中会经过中间代码生成阶段，Go 语言编译器的中间代码具有静态单赋值（Static Single Assignment、SSA）的特性，我们会在后面介绍该中间代码的该特性，在这里我们只需要知道这是一种中间代码的表示方式。</p><p>很多 Go 语言的开发者都知道我们可以使用下面的命令将 Go 语言的源代码编译成汇编语言，然后通过汇编语言分析程序具体的执行过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#960050;background-color:#1e0010>$</span> <span style=color:#66d9ef>go</span> <span style=color:#a6e22e>build</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>gcflags</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>S</span> <span style=color:#a6e22e>main</span>.<span style=color:#66d9ef>go</span>
	<span style=color:#a6e22e>rel</span> <span style=color:#ae81ff>22</span><span style=color:#f92672>+</span><span style=color:#ae81ff>4</span> <span style=color:#a6e22e>t</span>=<span style=color:#ae81ff>8</span> <span style=color:#a6e22e>os</span>.(<span style=color:#f92672>*</span><span style=color:#a6e22e>file</span>).<span style=color:#a6e22e>close</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>
<span style=color:#e6db74>&#34;&#34;</span>.<span style=color:#a6e22e>main</span> <span style=color:#a6e22e>STEXT</span> <span style=color:#a6e22e>size</span>=<span style=color:#ae81ff>137</span> <span style=color:#a6e22e>args</span>=<span style=color:#ae81ff>0x0</span> <span style=color:#a6e22e>locals</span>=<span style=color:#ae81ff>0x58</span>
	<span style=color:#ae81ff>0x0000</span> <span style=color:#ae81ff>00000</span> (<span style=color:#a6e22e>main</span>.<span style=color:#66d9ef>go</span>:<span style=color:#ae81ff>5</span>)	<span style=color:#a6e22e>TEXT</span>	<span style=color:#e6db74>&#34;&#34;</span>.<span style=color:#a6e22e>main</span>(<span style=color:#a6e22e>SB</span>), <span style=color:#a6e22e>ABIInternal</span>, <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#ae81ff>88</span><span style=color:#f92672>-</span><span style=color:#ae81ff>0</span>
	<span style=color:#ae81ff>0x0000</span> <span style=color:#ae81ff>00000</span> (<span style=color:#a6e22e>main</span>.<span style=color:#66d9ef>go</span>:<span style=color:#ae81ff>5</span>)	<span style=color:#a6e22e>MOVQ</span>	(<span style=color:#a6e22e>TLS</span>), <span style=color:#a6e22e>CX</span>
	<span style=color:#ae81ff>0x0009</span> <span style=color:#ae81ff>0000</span><span style=color:#ae81ff>9</span> (<span style=color:#a6e22e>main</span>.<span style=color:#66d9ef>go</span>:<span style=color:#ae81ff>5</span>)	<span style=color:#a6e22e>CMPQ</span>	<span style=color:#a6e22e>SP</span>, <span style=color:#ae81ff>16</span>(<span style=color:#a6e22e>CX</span>)
	<span style=color:#f92672>...</span>
	<span style=color:#a6e22e>rel</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>+</span><span style=color:#ae81ff>4</span> <span style=color:#a6e22e>t</span>=<span style=color:#ae81ff>17</span> <span style=color:#a6e22e>TLS</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>
	<span style=color:#a6e22e>rel</span> <span style=color:#ae81ff>40</span><span style=color:#f92672>+</span><span style=color:#ae81ff>4</span> <span style=color:#a6e22e>t</span>=<span style=color:#ae81ff>16</span> <span style=color:#66d9ef>type</span>.<span style=color:#66d9ef>string</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>
	<span style=color:#a6e22e>rel</span> <span style=color:#ae81ff>52</span><span style=color:#f92672>+</span><span style=color:#ae81ff>4</span> <span style=color:#a6e22e>t</span>=<span style=color:#ae81ff>16</span> <span style=color:#e6db74>&#34;&#34;</span>..<span style=color:#a6e22e>stmp_0</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>
	<span style=color:#a6e22e>rel</span> <span style=color:#ae81ff>64</span><span style=color:#f92672>+</span><span style=color:#ae81ff>4</span> <span style=color:#a6e22e>t</span>=<span style=color:#ae81ff>16</span> <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Stdout</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>
	<span style=color:#a6e22e>rel</span> <span style=color:#ae81ff>71</span><span style=color:#f92672>+</span><span style=color:#ae81ff>4</span> <span style=color:#a6e22e>t</span>=<span style=color:#ae81ff>16</span> <span style=color:#66d9ef>go</span>.<span style=color:#a6e22e>itab</span>.<span style=color:#f92672>*</span><span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>File</span>,<span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Writer</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>
	<span style=color:#a6e22e>rel</span> <span style=color:#ae81ff>113</span><span style=color:#f92672>+</span><span style=color:#ae81ff>4</span> <span style=color:#a6e22e>t</span>=<span style=color:#ae81ff>8</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintln</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>
	<span style=color:#a6e22e>rel</span> <span style=color:#ae81ff>128</span><span style=color:#f92672>+</span><span style=color:#ae81ff>4</span> <span style=color:#a6e22e>t</span>=<span style=color:#ae81ff>8</span> <span style=color:#a6e22e>runtime</span>.<span style=color:#a6e22e>morestack_noctxt</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>
</code></pre></div><p>然而上述的汇编代码只是 Go 语言编译的结果，作为使用 Go 语言的开发者，我们已经能够通过上述结果分析程序的性能瓶颈，但是如果想要了解 Go 语言更详细的编译过程，我们可以通过下面的命令获取汇编指令的优化过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ GOSSAFUNC<span style=color:#f92672>=</span>main go build main.go
<span style=color:#75715e># runtime</span>
dumped SSA to /usr/local/Cellar/go/1.14.2_1/libexec/src/runtime/ssa.html
<span style=color:#75715e># command-line-arguments</span>
dumped SSA to ./ssa.html
</code></pre></div><p>上述命令会在当前文件夹下生成一个 <code>ssa.html</code> 文件，我们打开这个文件后就能看到汇编代码优化的每一个步骤：</p><p><img src=https://img.draveness.me/2020-08-27-15985162772492/ssa-example.png alt=ssa-example-w4828></p><p><strong>图 1 - 1 SSA 示例</strong></p><p>上述 HTML 文件是可以交互的，当我们点击网页上的汇编指令时，页面会使用相同的颜色在 SSA 中间代码生成的不同阶段标识出相关的代码行，更方便开发者分析编译优化的过程。</p><h2 id=113-小结>1.1.3 小结
<a class=anchor href=#113-%e5%b0%8f%e7%bb%93>#</a></h2><p>掌握调试和自定义 Go 语言二进制的方法可以帮助我们快速验证对 Go 语言内部实现的猜想，通过最简单粗暴的 <code>println</code> 函数可以调试 Go 语言的源码和标准库；而如果我们想要研究源代码的详细编译优化过程，可以使用上面提到的 SSA 中间代码深入研究 Go 语言的中间代码以及编译优化的方式，不过只要我们想了解 Go 语言的实现原理，阅读源代码是绕不开的过程。</p><a href=/golang/docs/part1-prerequisite/ch02-compile/golang-compile-intro/ class=book-btn>下一节</a></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><div class="flex flex-wrap justify-between"></div><h2>购买纸质书</h2><p>各位读者朋友，很高兴大家通过本博客学习 Go 语言，感谢一路相伴！ <a href=/golang>《Go语言设计与实现》</a> 的纸质版图书已经上架京东，本书目前已经四印，印数超过 10,000 册，有需要的朋友请点击 <a href="https://union-click.jd.com/jdc?e=&p=JF8BAL8JK1olXDYCVlpeCEsQAl9MRANLAjZbERscSkAJHTdNTwcKBlMdBgABFksVB2wIG1wUQl9HCANtSABQA2hTHjBwD15qUVsVU01rX2oKXVcZbQcyV19eC0sTAWwPHGslXQEyAjBdCUoWAm4NH1wSbQcyVFlfDkkfBWsKGFkXWDYFVFdtfQhHRDtXTxlXbTYyV25tOEsnAF9KdV4QXw4HUAlVAU5DAmoMSQhGDgMBAVpcWEMSU2sLTlpBbQQDVVpUOA">链接 </a>或者下面的图片购买。</p><a href="https://union-click.jd.com/jdc?e=&p=JF8BAL8JK1olXDYCVlpeCEsQAl9MRANLAjZbERscSkAJHTdNTwcKBlMdBgABFksVB2wIG1wUQl9HCANtSABQA2hTHjBwD15qUVsVU01rX2oKXVcZbQcyV19eC0sTAWwPHGslXQEyAjBdCUoWAm4NH1wSbQcyVFlfDkkfBWsKGFkXWDYFVFdtfQhHRDtXTxlXbTYyV25tOEsnAF9KdV4QXw4HUAlVAU5DAmoMSQhGDgMBAVpcWEMSU2sLTlpBbQQDVVpUOA"><img src=https://img.draveness.me/16375090482882-golang-intro-1.png alt=golang-book-intro></a><div class="flex flex-wrap justify-between"></div><p><img width=70% style=width:70%;height:70%;!important src=https://img.draveness.me/2020-03-11-15839264230785-wechat-qr-code.png alt=wechat-account-qrcode></p><p>本作品采用<a rel=license href=http://creativecommons.org/licenses/by-nc-nd/4.0/>知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可。</p><link rel=stylesheet href=/golang/assets/prism.css><script type=text/javascript src=/golang/assets/prism.js></script><script>(function(w,d,s,id){if(typeof(w.webpushr)!=='undefined')return;w.webpushr=w.webpushr||function(){(w.webpushr.q=w.webpushr.q||[]).push(arguments)};var js,fjs=d.getElementsByTagName(s)[0];js=d.createElement(s);js.id=id;js.async=1;js.src="https://cdn.webpushr.com/app.min.js";fjs.parentNode.appendChild(js);}(window,document,'script','webpushr-jssdk'));webpushr('setup',{'key':'BKEGOqbGDOw5cDK8oIeqPhiq0LKfd-U8kXuIdwc_qyR_AGs0QtzZFBICnOPmi9hnApzzdX0X0TXC-oJ1-nGupGY'});</script><script src=https://giscus.app/client.js data-repo=draveness/blog-comments data-repo-id="MDEwOlJlcG9zaXRvcnkxMDg1NzY3MTY=" data-category=Announcements data-category-id=DIC_kwDOBni_zM4COMft data-mapping=specific data-term=/golang-debug data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=zh-CN crossorigin=anonymous async></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-56898419-1','auto');ga('set','referrer','https://dive-deep-into-golang');ga('send',{hitType:'pageview',page:"\/golang-debug",source:'a-sip-of-golang'});</script><script type=text/javascript async src="https://cdn.staticfile.org/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$']],processEscapes:true,processEnvironments:true,skipTags:['script','noscript','style','textarea','pre'],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}});MathJax.Hub.Queue(function(){var all=MathJax.Hub.getAllJax(),i;for(i=0;i<all.length;i+=1){all[i].SourceElement().parentNode.className+=' has-jax';}});MathJax.Hub.Config({TeX:{equationNumbers:{autoNumber:"AMS"}}});</script><footer class="site-footer clearfix"><style>.site-footer{position:relative;margin:1rem 0 0;padding:1rem 15px;font-family:open sans,sans-serif;font-size:1rem;line-height:1.75em;color:#bbc7cc}.site-footer a{color:#bbc7cc;text-decoration:none;font-weight:700}.site-footer a:hover{border-bottom:#bbc7cc 1px solid}.copyright{display:block;width:100%;float:left}</style><section class=copyright><a href=>面向信仰编程</a> &copy; 2014 - 2020 | <a href=http://beian.miit.gov.cn target=_blank>陕ICP备15004432号-2</a></section></footer></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#11-调试源代码>1.1 调试源代码</a><ul><li><a href=#111-编译源码>1.1.1 编译源码</a></li><li><a href=#112-中间代码>1.1.2 中间代码</a></li><li><a href=#113-小结>1.1.3 小结</a></li></ul></li></ul></nav></aside></main></body></html>